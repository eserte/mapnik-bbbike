<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE Map [
<!ENTITY % entities SYSTEM "inc/entities.xml.inc">
%entities;
]>
<!-- This stylesheet uses features only available in mapnik builds with
     libxml2 as the XML parser. Furthermore, there are other features
     and behaviour that necessitate an upgrade to mapnik 0.7.1 -->
<Map bgcolor="transparent" srs="&srs900913;" minimum_version="0.7.1">
  &fontset-settings;

<Style name="cycleway">
  
    <Rule>
      <Filter>[cycleway] = 'track'</Filter>
      &maxscale_zoom1;
      &minscale_zoom12;
      <LineSymbolizer>
        <CssParameter name="stroke">&color_RW2;</CssParameter>
        <CssParameter name="stroke-width">1</CssParameter>
      </LineSymbolizer>
    </Rule>
    <Rule>
<!--      <Filter>[cycleway] = 'track' and ([highway] = 'primary' or [highway] = 'secondary')</Filter> -->
      <Filter>[cycleway] = 'track'</Filter>
      &maxscale_zoom13;
      &minscale_zoom14;
      <LinePatternSymbolizer file="&symbols;/RW2_w8.png" />
    </Rule>
    <Rule>
<!--      <Filter>[cycleway] = 'track' and ([highway] = 'primary' or [highway] = 'secondary')</Filter> -->
      <Filter>[cycleway] = 'track'</Filter>
      &maxscale_zoom15;
      &minscale_zoom16;
      <LinePatternSymbolizer file="&symbols;/RW2_w12.png" />
    </Rule>
    <Rule>
<!--      <Filter>[cycleway] = 'track' and ([highway] = 'primary' or [highway] = 'secondary')</Filter> -->
      <Filter>[cycleway] = 'track'</Filter>
      &maxscale_zoom17;
      &minscale_zoom18;
      <LinePatternSymbolizer file="&symbols;/RW2_w16.png" />
    </Rule>

    <Rule>
      <Filter>[cycleway] = 'lane'</Filter>
      &maxscale_zoom1;
      &minscale_zoom12;
      <LineSymbolizer>
        <CssParameter name="stroke">&color_RW4;</CssParameter>
        <CssParameter name="stroke-width">1</CssParameter>
      </LineSymbolizer>
    </Rule>
    <Rule>
<!--      <Filter>[cycleway] = 'lane' and ([highway] = 'primary' or [highway] = 'secondary')</Filter> -->
      <Filter>[cycleway] = 'lane'</Filter>
      &maxscale_zoom13;
      &minscale_zoom14;
      <LinePatternSymbolizer file="&symbols;/RW4_w8.png" />
    </Rule>
    <Rule>
<!--      <Filter>[cycleway] = 'lane' and ([highway] = 'primary' or [highway] = 'secondary')</Filter> -->
      <Filter>[cycleway] = 'lane'</Filter>
      &maxscale_zoom15;
      &minscale_zoom16;
      <LinePatternSymbolizer file="&symbols;/RW4_w12.png" />
    </Rule>
    <Rule>
<!--      <Filter>[cycleway] = 'lane' and ([highway] = 'primary' or [highway] = 'secondary')</Filter> -->
      <Filter>[cycleway] = 'lane'</Filter>
      &maxscale_zoom17;
      &minscale_zoom18;
      <LinePatternSymbolizer file="&symbols;/RW4_w16.png" />
    </Rule>

    <Rule>
      <Filter>[psv] = 'yes'</Filter>
      &maxscale_zoom1;
      &minscale_zoom12;
      <LineSymbolizer>
        <CssParameter name="stroke">&color_RW5;</CssParameter>
        <CssParameter name="stroke-width">1</CssParameter>
      </LineSymbolizer>
    </Rule>
    <Rule>
<!--      <Filter>[psv] = 'yes' and ([highway] = 'primary' or [highway] = 'secondary')</Filter> -->
      <Filter>[psv] = 'yes'</Filter>
      &maxscale_zoom13;
      &minscale_zoom14;
      <LinePatternSymbolizer file="&symbols;/RW5_w8.png" />
    </Rule>
    <Rule>
<!--      <Filter>[psv] = 'yes' and ([highway] = 'primary' or [highway] = 'secondary')</Filter> -->
      <Filter>[psv] = 'yes'</Filter>
      &maxscale_zoom15;
      &minscale_zoom16;
      <LinePatternSymbolizer file="&symbols;/RW5_w12.png" />
    </Rule>
    <Rule>
<!--      <Filter>[psv] = 'yes' and ([highway] = 'primary' or [highway] = 'secondary')</Filter> -->
      <Filter>[psv] = 'yes'</Filter>
      &maxscale_zoom17;
      &minscale_zoom18;
      <LinePatternSymbolizer file="&symbols;/RW5_w16.png" />
    </Rule>

<!--   
    <Rule>
      <Filter>[bbbike:quality] = 'Q1'</Filter>
      &maxscale_zoom12;
      &minscale_zoom14;
      <LineSymbolizer>
        <CssParameter name="stroke">&color_Q1;</CssParameter>
        <CssParameter name="stroke-width">3.0</CssParameter>
        <CssParameter name="stroke-dasharray">&dasharray;</CssParameter>
      </LineSymbolizer>
    </Rule>
    <Rule>
      <Filter>[bbbike:quality] = 'Q2'</Filter>
      &maxscale_zoom12;
      &minscale_zoom14;
      <LineSymbolizer>
        <CssParameter name="stroke">&color_Q2;</CssParameter>
        <CssParameter name="stroke-width">3.0</CssParameter>
        <CssParameter name="stroke-dasharray">&dasharray;</CssParameter>
      </LineSymbolizer>
    </Rule>
    <Rule>
      <Filter>[bbbike:quality] = 'Q3'</Filter>
      &maxscale_zoom12;
      &minscale_zoom14;
      <LineSymbolizer>
        <CssParameter name="stroke">&color_Q3;</CssParameter>
        <CssParameter name="stroke-width">3.0</CssParameter>
        <CssParameter name="stroke-dasharray">&dasharray;</CssParameter>
      </LineSymbolizer>
    </Rule>

    <Rule>
      <Filter>[bbbike:quality] = 'Q1'</Filter>
      &maxscale_zoom1;
      &minscale_zoom11;
      <LineSymbolizer>
        <CssParameter name="stroke">&color_Q1;</CssParameter>
        <CssParameter name="stroke-width">1.5</CssParameter>
        <CssParameter name="stroke-dasharray">&dasharray;</CssParameter>
      </LineSymbolizer>
    </Rule>
    <Rule>
      <Filter>[bbbike:quality] = 'Q2'</Filter>
      &maxscale_zoom1;
      &minscale_zoom11;
      <LineSymbolizer>
        <CssParameter name="stroke">&color_Q2;</CssParameter>
        <CssParameter name="stroke-width">1.5</CssParameter>
        <CssParameter name="stroke-dasharray">&dasharray;</CssParameter>
      </LineSymbolizer>
    </Rule>
    <Rule>
      <Filter>[bbbike:quality] = 'Q3'</Filter>
      &maxscale_zoom1;
      &minscale_zoom11;
      <LineSymbolizer>
        <CssParameter name="stroke">&color_Q3;</CssParameter>
        <CssParameter name="stroke-width">1.5</CssParameter>
        <CssParameter name="stroke-dasharray">&dasharray;</CssParameter>
      </LineSymbolizer>
    </Rule> 
-->    
</Style>

<!-- -->
<Layer name="cycleway" status="on" srs="&osm2pgsql_projection;">
    <StyleName>cycleway</StyleName>
    <Datasource>
      <Parameter name="table">
      (select way,cycleway,highway,psv
       from &prefix;_line
       where cycleway is not null or psv = 'yes'
       order by z_order) as roads
      </Parameter>
      &datasource-settings;
    </Datasource>
</Layer>

</Map>
